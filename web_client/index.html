<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>NodeJS WebSocket Server</title>
</head>
<body>
<h1>Hello world</h1>
<script>
const ws = new WebSocket("ws://localhost:8080/chat");
ws.addEventListener("open", () =>{
  console.log("We are connected");
  //ws.send("How are you?");
});

ws.addEventListener('message', function (event) {
    console.log(event.data);
    printMessage(event.data);
});

function printMessage(data) {
            let messages = document.getElementById("messages");
            let messageData = JSON.parse(data);
            let newMessage = document.createElement("div");
            newMessage.innerHTML = messageData.name + " : " + messageData.message;
            messages.appendChild(newMessage);
        }
</script>
<div id="messages"></div>
</body>
</html>